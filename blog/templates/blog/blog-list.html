{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/blog.css' %}">
{% endblock %}

{% block content %}
    <section class="blog" aria-labelledby="blog-heading">
        <h1 id="blog-heading">Communitea's Community Blog</h1>

        {% for post in page_obj %}
            <div class="article-container">
                <article class="blog-post" aria-labelledby="post-title-{{ post.id }}">
                    <div class="blog-post-meeple" aria-hidden="true">
                        <img class="blog-post-meeple--red" src="{% static 'images/meeple-svgrepo-com.svg' %}" alt="">
                        <img class="blog-post-meeple--yellow" src="{% static 'images/meeple-svgrepo-com.svg' %}" alt="">
                        <img class="blog-post-meeple--green" src="{% static 'images/meeple-svgrepo-com.svg' %}" alt="">
                    </div>

                    <h2 id="post-title-{{ post.id }}">{{ post.title }}</h2>
                    <p class="blog-post-date">
                        <strong>{{ post.created_at|date:"F j, Y, g:i a" }}</strong>
                    </p>

                    <div class="blog-post-content">
                        {{ post.content|linebreaks }}
                    </div>

                    {% if post.image %}
                        <img class="blog-post-img" src="{{ post.image.url }}" loading="lazy" alt="Image for {{ post.title }}">
                    {% endif %}
                </article>
            </div>
        {% endfor %}

        <nav class="pagination" role="navigation" aria-label="Blog pagination">
            {% if page_obj.has_previous %}
                <a class="btn" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous page">
                    <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>
                </a>
            {% endif %}

            <span aria-live="polite">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

            {% if page_obj.has_next %}
                <a class="btn" href="?page={{ page_obj.next_page_number }}" aria-label="Next page">
                    <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
                </a>
            {% endif %}
        </nav>
    </section>
{% endblock %}